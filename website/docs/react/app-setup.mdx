---
sidebar_position: 1
---

import CodeBlock from '@theme/CodeBlock';
import BrowserOnly from '@docusaurus/BrowserOnly';

import {Incrementor} from '@site/src/components/examples/Incrementor';
import {ExampleApp} from '@site/src/components/examples/ExampleApp';
import {Demo} from '@site/src/components/examples/Demo';
import StoreSource from '!!raw-loader!/src/components/examples/state';
import IncrementorSource from '!!raw-loader!/src/components/examples/Incrementor';
import ExampleAppSource from '!!raw-loader!/src/components/examples/ExampleApp';

# App Setup

#### Demo

<Demo render={ ()=>{
  return (
    <ExampleApp>
      <Incrementor/>
    </ExampleApp>);
    }
  }/>

## Create your state

Your store is where you will be keeping all the state in your application.  [`createRecordingProxy`](/core/create-recording-proxy.mdx) returns a proxy wrapped object that now starts tracking **changes as patches** to your state tree.  

For convenience, if you're using TypeScript it is recommended to wrap the [`useRootState`](use-root-state.mdx) hook so that it will return a strongly typed version of your store.

<CodeBlock language="ts">{StoreSource}</CodeBlock>

## Create a Component 

<CodeBlock language="tsx">{IncrementorSource}</CodeBlock>

## Create a Store

First, you simply initialize your state with `createReactStore`.  You may use reacts useState hook or define your state globablly.  It's up to you. 

At the top level of your app, you need a `StoreContext` provider that will enable support for all of Diagon's hooks.

That provider is initialized with your store. 

```tsx
import { createReactStore, StoreContext } from 'diagon-react';
import React, { FC, useState } from 'react';
import { createRootState } from './state';

export const App: FC = ({ children }) => {
    const [store] = useState(() => createReactStore(createRootState()));

    return (
        <StoreContext.Provider value={store}>
            <Incrementor/>
        </StoreContext.Provider>
    );
};
```
